import os

from tqdm import tqdm


DIRECTORY_TO_PROCESS = "train/"
DIRECTORY_TO_WRITE = "bytes_raw/"
files_to_process = os.listdir("train")

def entry_process_file(path_to_process: str, path_to_write: str, filenames: list[str]):
    with tqdm(total=len(filenames), desc="Entry preprocessing: ") as bar:
        if not os.path.exists(path_to_write):
            os.makedirs(path_to_write)

        for filename in filenames:
            filename_to_write = filename.split(".")[0]
            file_to_write = open(f"{path_to_write}{filename_to_write}", mode="w+")
            with open(f"{path_to_process}{filename}", mode="rb") as file_handler:
                read_file = file_handler.read().decode().splitlines()
                for line in read_file:
                    if "?" in line:
                        continue
                    line_to_write = " ".join(line.split()[1:])
                    file_to_write.write(f"{line_to_write}\n")
                file_to_write.close()
                bar.update(1)

if __name__ == "__main__":
    entry_process_file(DIRECTORY_TO_PROCESS, DIRECTORY_TO_WRITE,files_to_process)